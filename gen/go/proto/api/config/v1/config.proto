syntax = "proto3";

package uptimeping.config.v1;

//import "google/api/annotations.proto";
import "google/protobuf/struct.proto";

option go_package = "gitlab.com/rodionov_v_al/UptimePingPlatform/gen/go/proto/api/config/v1";

// ConfigService предоставляет методы для управления конфигурациями проверок
service ConfigService {
  // CreateCheck создает новую конфигурацию проверки
  rpc CreateCheck(CreateCheckRequest) returns (Check) {}
  
  // GetCheck возвращает конфигурацию проверки по ID
  rpc GetCheck(GetCheckRequest) returns (Check) {}
  
  // UpdateCheck обновляет существующую конфигурацию проверки
  rpc UpdateCheck(UpdateCheckRequest) returns (Check) {}
  
  // DeleteCheck удаляет конфигурацию проверки
  rpc DeleteCheck(DeleteCheckRequest) returns (DeleteCheckResponse) {}
  
  // ListChecks возвращает список конфигураций проверок с пагинацией
  rpc ListChecks(ListChecksRequest) returns (ListChecksResponse) {}
}

// Check представляет конфигурацию проверки
message Check {
  string id = 1;
  string tenant_id = 2;
  string name = 3;
  CheckType type = 4;
  string target = 5;
  int32 interval = 6;
  int32 timeout = 7;
  CheckStatus status = 8;
  google.protobuf.Struct config = 9;
  string created_at = 10;
  string updated_at = 11;
}

// CheckType определяет тип проверки
enum CheckType {
  CHECK_TYPE_UNSPECIFIED = 0;
  CHECK_TYPE_HTTP = 1;
  CHECK_TYPE_GRPC = 2;
  CHECK_TYPE_GRAPHQL = 3;
  CHECK_TYPE_TCP = 4;
}

// CheckStatus определяет статус проверки
enum CheckStatus {
  CHECK_STATUS_UNSPECIFIED = 0;
  CHECK_STATUS_ACTIVE = 1;
  CHECK_STATUS_PAUSED = 2;
  CHECK_STATUS_DISABLED = 3;
}

// CreateCheckRequest содержит данные для создания проверки
message CreateCheckRequest {
  string tenant_id = 1;
  string name = 2;
  CheckType type = 3;
  string target = 4;
  int32 interval = 5;
  int32 timeout = 6;
  google.protobuf.Struct config = 7;
}

// GetCheckRequest содержит ID проверки
message GetCheckRequest {
  string check_id = 1;
  string tenant_id = 2;
}

// UpdateCheckRequest содержит данные для обновления проверки
message UpdateCheckRequest {
  string check_id = 1;
  string tenant_id = 2;
  string name = 3;
  CheckType type = 4;
  string target = 5;
  int32 interval = 6;
  int32 timeout = 7;
  CheckStatus status = 8;
  google.protobuf.Struct config = 9;
}

// DeleteCheckRequest содержит ID проверки для удаления
message DeleteCheckRequest {
  string check_id = 1;
  string tenant_id = 2;
}

// DeleteCheckResponse подтверждает удаление
message DeleteCheckResponse {
  bool success = 1;
}

// ListChecksRequest содержит параметры фильтрации и пагинации
message ListChecksRequest {
  string tenant_id = 1;
  int32 page_size = 2;
  int32 page_token = 3;
  string filter = 4;
  string order_by = 5;
}

// ListChecksResponse содержит список проверок
message ListChecksResponse {
  repeated Check checks = 1;
  int32 next_page_token = 2;
}